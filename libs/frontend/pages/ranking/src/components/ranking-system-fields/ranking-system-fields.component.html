<form [formGroup]="rankingSystemForm">
  <h4>Ranking</h4>
  <div>
    <button
      mat-raised-button
      color="primary"
      (click)="this.whenUpdated.emit(this.rankingSystemForm.value)"
      [disabled]="!this.rankingSystemForm.valid"
    >
      {{ 'all.button.save' | translate }}
    </button>
  </div>
  <div class="mat-subheading-2">
    When field isn't required (see '*') leave empty for disable limitation
  </div>
  <div class="row">
    <mat-form-field appearance="outline" class="flex">
      <mat-label>{{ 'all.input.name' | translate }}</mat-label>
      <input matInput formControlName="name" alt="name" autocomplete="name" required />
    </mat-form-field>
  </div>
  <div class="row">
    <mat-form-field appearance="outline">
      <mat-label>Type</mat-label>
      <mat-select
        formControlName="rankingSystem"
        alt="rankingSystem"
        autocomplete="rankingSystem"
        required
      >
        <mat-option value="BVL">BVL</mat-option>
        <mat-option value="LFBB">LFBB</mat-option>
        <mat-option value="Original">Original</mat-option>
        <mat-option value="VISUAL">Visual</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Amount of levels</mat-label>
      <input
        type="number"
        matInput
        formControlName="amountOfLevels"
        alt="amountOfLevels"
        autocomplete="amountOfLevels"
        required
      />
    </mat-form-field>
  </div>
  <div class="row">
    <mat-form-field appearance="outline">
      <mat-label>% Winning</mat-label>
      <input
        type="number"
        matInput
        formControlName="procentWinning"
        alt="procentWinning"
        autocomplete="procentWinning"
        required
      />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>% Winning + 1</mat-label>
      <input
        type="number"
        min="0"
        max="100"
        matInput
        formControlName="procentWinningPlus1"
        alt="procentWinningPlus1"
        autocomplete="procentWinningPlus1"
        required
      />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>% Losing</mat-label>
      <input
        type="number"
        matInput
        formControlName="procentLosing"
        alt="procentLosing"
        autocomplete="procentLosing"
        required
      />
    </mat-form-field>
  </div>
  <div class="row">
    <mat-form-field appearance="outline">
      <mat-label>Games to use</mat-label>
      <input
        type="number"
        matInput
        formControlName="latestXGamesToUse"
        alt="latestXGamesToUse"
        autocomplete="latestXGamesToUse"
      />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Min number of games to use for upgrade</mat-label>
      <input
        type="number"
        matInput
        formControlName="minNumberOfGamesUsedForUpgrade"
        alt="minNumberOfGamesUsedForUpgrade"
        autocomplete="minNumberOfGamesUsedForUpgrade"
      />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Diff levels</mat-label>
      <input
        type="number"
        matInput
        formControlName="maxDiffLevels"
        alt="maxDiffLevels"
        autocomplete="maxDiffLevels"
        required
      />
    </mat-form-field>
  </div>
  <div class="row">
    <mat-slide-toggle formControlName="primary">Primary</mat-slide-toggle>
    <mat-slide-toggle formControlName="calculateUpdates">Calculate updates</mat-slide-toggle>
  </div>
  <h4>Update interval</h4>
  <div class="row">
    <mat-form-field appearance="outline">
      <mat-label>Point update</mat-label>
      <input
        type="number"
        matInput
        formControlName="calculationIntervalAmount"
        alt="calculationIntervalAmount"
        autocomplete="calculationIntervalAmount"
        required
      />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Point update</mat-label>
      <mat-select
        formControlName="calculationIntervalUnit"
        alt="calculationIntervalUnit"
        autocomplete="calculationIntervalUnit"
        required
      >
        <mat-option value="months">Months</mat-option>
        <mat-option value="weeks">Weeks</mat-option>
        <mat-option value="days">Days</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Point update day</mat-label>
      <mat-select formControlName="calculationDayOfWeek">
        <mat-option [value]="1">{{ 'all.days.monday' | translate }}</mat-option>
        <mat-option [value]="2">{{ 'all.days.tuesday' | translate }}</mat-option>
        <mat-option [value]="3">{{ 'all.days.wednesday' | translate }}</mat-option>
        <mat-option [value]="4">{{ 'all.days.thursday' | translate }}</mat-option>
        <mat-option [value]="5">{{ 'all.days.friday' | translate }}</mat-option>
        <mat-option [value]="6">{{ 'all.days.saturday' | translate }}</mat-option>
        <mat-option [value]="7">{{ 'all.days.sunday' | translate }}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div class="row">
    <mat-form-field appearance="outline">
      <mat-label>Ranking update</mat-label>
      <input
        type="number"
        matInput
        formControlName="updateIntervalAmount"
        alt="updateIntervalAmount"
        autocomplete="updateIntervalAmount"
        required
      />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Ranking update</mat-label>
      <mat-select
        formControlName="updateIntervalUnit"
        alt="updateIntervalUnit"
        autocomplete="updateIntervalUnit"
        required
      >
        <mat-option value="months">Months</mat-option>
        <mat-option value="weeks">Weeks</mat-option>
        <mat-option value="days">Days</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Calculation update day</mat-label>
      <mat-select formControlName="updateDayOfWeek">
        <mat-option [value]="1">{{ 'all.days.monday' | translate }}</mat-option>
        <mat-option [value]="2">{{ 'all.days.tuesday' | translate }}</mat-option>
        <mat-option [value]="3">{{ 'all.days.wednesday' | translate }}</mat-option>
        <mat-option [value]="4">{{ 'all.days.thursday' | translate }}</mat-option>
        <mat-option [value]="5">{{ 'all.days.friday' | translate }}</mat-option>
        <mat-option [value]="6">{{ 'all.days.saturday' | translate }}</mat-option>
        <mat-option [value]="7">{{ 'all.days.sunday' | translate }}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div class="row">
    <mat-form-field appearance="outline">
      <mat-label>Period games</mat-label>
      <input
        type="number"
        matInput
        formControlName="periodAmount"
        alt="periodAmount"
        autocomplete="periodAmount"
        required
      />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Period games</mat-label>
      <mat-select formControlName="periodUnit" alt="periodUnit" autocomplete="periodUnit" required>
        <mat-option value="months">Months</mat-option>
        <mat-option value="weeks">Weeks</mat-option>
        <mat-option value="days">Days</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <h4>Upgrade / Downgrade</h4>
  <div class="row">
    <mat-form-field appearance="outline">
      <mat-label>Level diff used for upgrade Single</mat-label>
      <input
        type="number"
        matInput
        formControlName="differenceForUpgradeSingle"
        alt="differenceForUpgradeSingle"
        autocomplete="differenceForUpgradeSingle"
        required
      />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Level diff used for upgrade Double</mat-label>
      <input
        type="number"
        matInput
        formControlName="differenceForUpgradeDouble"
        alt="differenceForUpgradeDouble"
        autocomplete="differenceForUpgradeDouble"
        required
      />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Level diff used for upgrade Mix</mat-label>
      <input
        type="number"
        matInput
        formControlName="differenceForUpgradeMix"
        alt="differenceForUpgradeMix"
        autocomplete="differenceForUpgradeMix"
        required
      />
    </mat-form-field>
  </div>
  <div class="row">
    <mat-form-field appearance="outline">
      <mat-label>Level diff used for downgrade Single</mat-label>
      <input
        type="number"
        matInput
        formControlName="differenceForDowngradeSingle"
        alt="differenceForDowngradeSingle"
        autocomplete="differenceForDowngradeSingle"
        required
      />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Level diff used for downgrade Double</mat-label>
      <input
        type="number"
        matInput
        formControlName="differenceForDowngradeDouble"
        alt="differenceForDowngradeDouble"
        autocomplete="differenceForDowngradeDouble"
        required
      />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Level diff used for downgrade Mix</mat-label>
      <input
        type="number"
        matInput
        formControlName="differenceForDowngradeMix"
        alt="differenceForDowngradeMix"
        autocomplete="differenceForDowngradeMix"
        required
      />
    </mat-form-field>
  </div>
  <div class="row">
    <mat-form-field appearance="outline">
      <mat-label>Max # levels up per change</mat-label>
      <input
        type="number"
        matInput
        formControlName="maxLevelUpPerChange"
        alt="maxLevelUpPerChange"
        autocomplete="maxLevelUpPerChange"
      />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Max # levels down per change</mat-label>
      <input
        type="number"
        matInput
        formControlName="maxLevelDownPerChange"
        alt="maxLevelDownPerChange"
        autocomplete="maxLevelDownPerChange"
      />
    </mat-form-field>
  </div>
  <h4>Inactivity</h4>
  <div class="row">
    <mat-form-field appearance="outline">
      <mat-label>Inactivity period</mat-label>
      <input
        type="number"
        matInput
        formControlName="inactivityAmount"
        alt="inactivityAmount"
        autocomplete="inactivityAmount"
        required
      />
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Inactivity period</mat-label>
      <mat-select
        formControlName="inactivityUnit"
        alt="inactivityUnit"
        autocomplete="inactivityUnit"
        required
      >
        <mat-option value="months">Months</mat-option>
        <mat-option value="weeks">Weeks</mat-option>
        <mat-option value="days">Days</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Games for inactivty</mat-label>
      <input
        type="number"
        matInput
        formControlName="gamesForInactivty"
        alt="gamesForInactivty"
        autocomplete="gamesForInactivty"
        required
      />
    </mat-form-field>
  </div>
  <h4>Link to events</h4>
  <div class="row">
    <mat-form-field appearance="outline">
      <mat-label>Groups</mat-label>
      <mat-select
        [formControl]="this.rakingGroupForm"
        (selectionChange)="onGroupChange($event)"
        alt="group"
        multiple
        required
        [compareWith]="this.groupCompare"
      >
        @for (group of this.groups(); track group) {
          <mat-option [value]="group">{{ group.name }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>
</form>
