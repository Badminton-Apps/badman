<ng-container *ngIf="this.role">
  <div class="general">
    <div class="name">
      {{ this.role()?.name }}
      <span
        *ngIf="this.role()?.locked"
        class="locked"
        [matTooltip]="'all.security.roles.locked' | translate"
        ><mat-icon>lock</mat-icon></span
      >
    </div>
    <div class="actions">
      <button mat-icon-button [matMenuTriggerFor]="menu" title="more options">
        <mat-icon>more_vert</mat-icon>
      </button>

      <mat-menu #menu="matMenu">
        <button
          mat-menu-item
          [disabled]="this.role()?.locked"
          [matTooltip]="'all.security.roles.locked' | translate"
          [matTooltipDisabled]="!this.role()?.locked"
          (click)="editClaims()"
        >
          <mat-icon>edit</mat-icon>
          <span>{{ 'all.button.edit' | translate }}</span>
        </button>
        <button
          mat-menu-item
          [disabled]="this.role()?.locked"
          [matTooltip]="'all.security.roles.locked' | translate"
          [matTooltipDisabled]="!this.role()?.locked"
        >
          <mat-icon>delete</mat-icon>
          <span>{{ 'all.button.delete' | translate }}</span>
        </button>
      </mat-menu>
    </div>
  </div>

  <mat-divider></mat-divider>

  <div class="player" *ngFor="let player of this.role()?.players">
    <div class="name">
      {{ player.fullName }}
    </div>
    <div class="delete">
      <button
        mat-icon-button
        (click)="onPlayerRemovedFromRole(player)"
        [disabled]="removeDisabled()"
      >
        <mat-icon>delete</mat-icon>
      </button>
    </div>
  </div>
  <badman-player-search
    [allowCreation]="false"
    [searchOutsideClub]="true"
    [label]="'Voeg speler toe'"
    (whenSelectPlayer)="onPlayerAddedToRole($event)"
  ></badman-player-search>
</ng-container>

<ng-template #editClaimsTemplate>
  <h2 mat-dialog-title>{{ 'all.security.claims.edit.title' | translate }}</h2>
  <mat-dialog-content>
    <ng-container *ngFor="let group of this.claims?.()">
      <h2>{{ group.category }}</h2>
      <ng-container *ngFor="let claim of group.claims">
        <badman-claim
          [claim]="claim"
          [value]="roleClaimsIds().includes(claim.id) || false"
          (whenChange)="onClaimChange($event, claim)"
        ></badman-claim>
      </ng-container> </ng-container
  ></mat-dialog-content>
  <mat-dialog-actions>
    <button mat-button mat-dialog-close>
      {{ 'all.button.cancel' | translate }}
    </button>
    <!-- The mat-dialog-close directive optionally accepts a value as a result for the dialog. -->
    <button mat-button [mat-dialog-close]="true">
      {{ 'all.button.save' | translate }}
    </button>
  </mat-dialog-actions>
</ng-template>
