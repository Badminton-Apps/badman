<div class="mat-subheading-1">Admin page</div>

<div class="mat-subheading-2">Jobs</div>

<table mat-table matSort matSortActive="id" matSortDisableClear matSortDirection="asc" [dataSource]="this.dataSource">
  <ng-container matColumnDef="running">
    <th mat-header-cell *matHeaderCellDef></th>
    <td mat-cell *matCellDef="let element">
      <mat-icon *ngIf="element.running">graphic_eq</mat-icon>
    </td>
  </ng-container>

  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'input.name' | translate }}</th>
    <td mat-cell *matCellDef="let element">{{ element.type }}</td>
  </ng-container>

  <ng-container matColumnDef="scheduled">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Scheduled</th>
    <td mat-cell *matCellDef="let element"><mat-icon *ngIf="element.scheduled">check</mat-icon></td>
  </ng-container>

  <ng-container matColumnDef="cron">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Cron</th>
    <td mat-cell *matCellDef="let element">
      <span [matTooltip]="element?.tooltip">
        {{ element.cron }}
      </span>
    </td>
  </ng-container>

  <ng-container matColumnDef="done">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
    <td mat-cell *matCellDef="let element">
      <span *ngIf="element.meta?.percent"
        >{{ element.meta.percent }}% ({{ element.meta.current }}/{{ element.meta.total }})</span
      >
    </td>
  </ng-container>

  <ng-container matColumnDef="lastRun">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Last run</th>
    <td mat-cell *matCellDef="let element">
      <span *ngIf="element.lastRun">{{ element.lastRun | amDateFormat: 'LLL' }}</span>
    </td>
  </ng-container>

  <ng-container matColumnDef="options">
    <th mat-header-cell *matHeaderCellDef></th>
    <td mat-cell *matCellDef="let element">
      <button mat-icon-button [matMenuTriggerFor]="rankingSystemMenu">
        <mat-icon>more_vert</mat-icon>
      </button>

      <mat-menu #rankingSystemMenu="matMenu">
        <button mat-menu-item (click)="runJob(element)">Trigger</button>
      </mat-menu>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>
<mat-paginator [length]="resultsLength" [pageSize]="30"> </mat-paginator>
