<ng-container *ngIf="this.team$ | async as team; else loading">
  <h2 mat-dialog-title>Edit team</h2>
  <mat-dialog-content>
    <app-team-fields [club]="this.data.club" [team]="team" (updatedTeam)="this.updatedTeam($event)"></app-team-fields>
    <app-team-players *ngIf="team.id" [club]="this.data.club" [team]="team" [disableIds]="this.alreadyUsed$ | async" (onPlayerAdded)="this.onPlayerAddedToTeam($event, team)" (onPlayerRemoved)="this.onPlayerRemovedFromTeam($event, team)" (onPlayerUpdated)="this.onPlayerUpdatedFromTeam($event, team)">
    </app-team-players>
  </mat-dialog-content>

  <mat-dialog-actions>
    <button mat-raised-button color="primary" *ngIf="!team.id" [disabled]="!this.data.team?.name" (click)="this.create()">
      Create
    </button>

    <button mat-button [mat-dialog-close]="team">Close</button>
  </mat-dialog-actions>
</ng-container>
<ng-template #loading>
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</ng-template>
