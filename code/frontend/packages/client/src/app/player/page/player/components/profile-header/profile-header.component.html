<div class="mat-elevation-z1" *ngIf="this.places$ | async as places">
  <div class="header">
    <button class="options" mat-icon-button [matMenuTriggerFor]="options">
      <mat-icon>more_vert</mat-icon>
    </button>

    <mat-menu #options="matMenu">
      <button mat-menu-item *ngIf="!this.canClaimAccount?.isUser && !this.canClaimAccount?.canClaim">
        Placeholder for favorite
      </button>
      <button mat-menu-item *ngIf="this.canClaimAccount?.isUser">Placeholder for profile</button>

      <button mat-menu-item *ngIf="this.canClaimAccount?.canClaim" (click)="this.claimAccount.next(player.id!)">
        Claim
      </button>

      <button mat-menu-item *ngIf="this.canClaimAccount?.isClaimedByUser">You've requested this account</button>

      <mat-divider></mat-divider>
      <button mat-menu-item [routerLink]="['edit']">
        {{ 'button.edit' | translate }}
      </button>

      <app-has-claim [any]="['merge:player']">
        <button mat-menu-item (click)="this.mergePlayer()">
          {{ 'button.merge-accounts' | translate }}
        </button>
      </app-has-claim>

      <app-has-claim [any]="['delete:player']">
        <button mat-menu-item>{{ 'button.delete' | translate }}</button>
      </app-has-claim>
    </mat-menu>
    <img src="../../assets/images//user-profile-bg.jpg" alt="Background image" />
  </div>

  <div class="info">
    <div class="picture" fxHide.lt-md>
      {{ this.initials }}
    </div>
    <div class="name">
      <span class="up"> {{ this.player.firstName }} {{ this.player.lastName }}</span>
      <div class="down" fxLayout.lt-md="column" fxLayout="row" fxLayoutGap="3px">
        <div *ngIf="this.player.club">
          <a [routerLink]="['/', 'club', this.player.club?.slug]">{{ this.player.club?.name }}</a>
          <span fxHide.lt-md> - </span>
        </div>
        <div>{{ this.player.memberId }} - {{ this.player.gender }}</div>
      </div>
    </div>

    <div class="ranking" *ngIf="places.shownRankingPrimary">
      <div
        class="single"
        [matTooltip]="singleTooltip"
        [matTooltipDisabled]="!singleTooltip"
        [routerLink]="['ranking', 'single']"
      >
        <span class="up">
          <span [ngClass]="{ viewing: places.shownRanking }">{{ places.shownRankingPrimary.single }}</span>
          <span *ngIf="places.shownRanking"> <span class="viewing">➔</span> {{ places.shownRanking.single }} </span>
          <mat-icon *ngIf="places.shownRankingPrimary.singleInactive" matTooltip="Player in inactive for single"
            >warning
          </mat-icon>
        </span>
        <span class="down">
          <span [ngClass]="{ viewing: places.shownRanking }">{{ places.shownRankingPrimary.singlePoints }}</span>
          <span *ngIf="places.shownRanking">
            <span class="viewing">➔</span> {{ places.shownRanking.singlePoints }}
          </span>
        </span>
      </div>
      <div
        class="double"
        [matTooltip]="doubleTooltip"
        [matTooltipDisabled]="!doubleTooltip"
        [routerLink]="['ranking', 'double']"
      >
        <span class="up">
          <span [ngClass]="{ viewing: places.shownRanking }">{{ places.shownRankingPrimary.double }}</span>
          <span *ngIf="places.shownRanking"><span class="viewing">➔</span> {{ places.shownRanking.double }} </span>
          <mat-icon *ngIf="places.shownRankingPrimary.doubleInactive" matTooltip="Player in inactive for double"
            >warning
          </mat-icon>
        </span>
        <span class="down">
          <span [ngClass]="{ viewing: places.shownRanking }">{{ places.shownRankingPrimary.doublePoints }}</span>
          <span *ngIf="places.shownRanking">
            <span class="viewing">➔</span> {{ places.shownRanking.doublePoints }}
          </span>
        </span>
      </div>
      <div class="mix" [matTooltip]="mixTooltip" [matTooltipDisabled]="!mixTooltip" [routerLink]="['ranking', 'mix']">
        <span class="up">
          <span [ngClass]="{ viewing: places.shownRanking }">{{ places.shownRankingPrimary.mix }}</span>
          <span *ngIf="places.shownRanking"><span class="viewing">➔</span> {{ places.shownRanking.mix }} </span>
          <mat-icon *ngIf="places.shownRankingPrimary.mixInactive" matTooltip="Player in inactive for mix"
            >warning
          </mat-icon>
        </span>
        <span class="down">
          <span [ngClass]="{ viewing: places.shownRanking }">{{ places.shownRankingPrimary.mixPoints }}</span>
          <span *ngIf="places.shownRanking">
            <span class="viewing">➔</span> {{ places.shownRanking.mixPoints }}
          </span>
        </span>
      </div>
    </div>
  </div>

  <div class="below">
    <small>Click on a level for simulation and breakdown</small>
  </div>
</div>
