<div fxLayout="row">
  <div>
    <button mat-button (click)="decreaseMonth()">-</button>
    <button mat-button (click)="setCurrentMonth()">Today</button>
    <button mat-button (click)="increaseMonth()">+</button>
    <strong>{{ currentMonth }}</strong>
  </div>
  <div>
    <mat-chip-list aria-label="Locatin selection">
      <mat-chip *ngFor="let loc of locations | keyvalue">
        <mat-chip-avatar>{{ loc.key }}</mat-chip-avatar>
        {{ loc.value?.name }}</mat-chip
      >
    </mat-chip-list>
  </div>
</div>

<div class="calendar-table" *ngIf="calendar; else loading">
  <div class="calendar-day weekday" *ngFor="let weekDay of weekDayNames">{{ weekDay | titlecase }}</div>

  <div
    *ngFor="let row of calendar"
    class="calendar-day"
    [ngClass]="{ 'past-date': row.isPastDate, today: row.isToday }"
  >
    <div class="calendar-day-header" [ngClass]="{ 'blue-date': row.isToday }">
      <div fxFlex>
        <strong>{{ row.date.getDate() }}</strong>
        <strong *ngIf="row.isToday || row.date.getDate() == 1">
          {{ monthNames[row.date.getMonth()] | titlecase }}</strong
        >
      </div>
      <div class="location-availibilty">
        <span *ngFor="let courts of row.remainingCourts">{{ courts }}</span>
      </div>
    </div>

    <div class="calendar-day-content" fxLayout="column" fxLayoutAlign="center">
      <div fxFlex *ngFor="let calEvent of row.events">
        <span class="event-location">{{ calEvent?.locationId }}</span>
        <span class="event-name">{{ calEvent?.name }}</span>
        <span class="event-time">19:00</span>
      </div>
    </div>
  </div>
</div>

<ng-template #loading>
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</ng-template>
